# Select list
query MyQuery {
  experience_products {
    name
  }
}
# Select one
query MyQuery {
  experience_productsById(id: "")
}
# Filter
query MyQuery {
  experience_products(where: {countryOfOrigin: {_eq: "US"}}) {
    id
    countryOfOrigin
  }
}
# Paginate
query MyQuery {
  experience_products(offset: 1, limit: 2) {
    countryOfOrigin
    name
  }
}
# Sort
query MyQuery {
  experience_products(order_by: {createdAt: Asc}) {
    name
    createdAt
  }
}
#Joins (Across DBs)

query MyQuery {
  experience_products {
    name
    orders {
      createdAt
      users {
        name
        reviews {
          text
        }
      }
    }
  }
}

# Nested filter
      #   fetch articles where article.author.city == SF
query MyQuery {
  experience_products(where: {categories: {name: {_eq: "Hats"}}}) {
    id
  }
}
# Nested sort 
      # fetch articles orderby article.author.city
query MyQuery {
  experience_products(order_by: {manufacturers: {name: Asc}}) {
    id
  }
}
# Nested paginate (top n)
      # fetch top 5 authors and their top 5 articles by rating

query MyQuery {
  experience_products(limit: 3, order_by: {price: Desc}) {
    reviews(limit: 1, order_by: {createdAt: Asc}) {
      id
      text
    }
    name
  }
}

query TopN{
  experience_products(offset: 1, order_by: {manufacturers: {name: Asc}}) {
    name
    orders(order_by: {createdAt: Asc}, limit: 2) {
      createdAt
      users {
        name
        reviews(order_by: {rating: Desc}, limit: 1) {
          text
        }
      }
    }
  }
}

query ProductHomePage {
  experience_products( #1 Select list
    where: {countryOfOrigin: {_eq: "US"}, categories: {name: {_eq: "T-Shirts"}}} # 2 Filtering and 7 Nested Filtering
    # order_by: {price: Asc} # 3 Sorting
    order_by: {categories: {name: Asc}} # 8 Nested Sorting Same Database
    offset: 1 # 4 Pagination
    limit: 5 # 4 Pagination
  ) {
    id
    name
    price
    description
    categories { # 5 Same Database Join
      name}
    manufacturers {
      name # 5 Same Database Join
    }
    orders{  # Two level nested join across database
      createdAt
      deliveryDate
      status
      users{
        name  # 6 Three Level Nested Join across database
      }
    }
    # 9 Nested paginate (top n)
    topReviews: reviews( 
      where: {createdAt: {_gt: "2023-10-15"}} # Filtering
      order_by: {rating: Desc} # Sorting
      limit: 3 # Pagination
    ) {
      rating
      text
    }
  }}